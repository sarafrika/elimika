<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>Order Receipt</title>
</head>
<body style="font-family: 'Times New Roman', serif; color: #111827; background: #ffffff; padding: 32px; line-height: 1.6;">
<article style="max-width: 720px; margin: 0 auto;">
    <header style="border-bottom: 1px solid #d1d5db; margin-bottom: 16px; padding-bottom: 8px;">
        <h1 style="margin: 0; font-size: 24px;">Receipt (Harvard Style)</h1>
        <p style="margin: 4px 0 0 0; font-size: 14px;">Order <span th:text="${orderDisplayId != null ? orderDisplayId : orderId}">#12345</span> · <span th:text="${#temporals.format(createdAt, 'yyyy-MM-dd HH:mm ''UTC''')}">2025-11-18 09:00 UTC</span></p>
    </header>

    <section style="margin-bottom: 16px;">
        <p style="margin: 0;">Recipient: <strong th:text="${recipientName}">Learner</strong> (<span th:text="${recipientEmail}">student@example.com</span>)</p>
        <p style="margin: 4px 0 0 0;">Payment status: <strong th:text="${paymentStatus}">PAID</strong></p>
    </section>

    <section style="margin-bottom: 16px;">
        <h2 style="margin: 0 0 8px 0; font-size: 18px;">Line items</h2>
        <table width="100%" cellpadding="0" cellspacing="0" style="border-collapse: collapse;">
            <thead>
            <tr>
                <th align="left" style="border-bottom: 1px solid #e5e7eb; padding: 6px 0;">Item</th>
                <th align="center" style="border-bottom: 1px solid #e5e7eb; padding: 6px 0;">Qty</th>
                <th align="right" style="border-bottom: 1px solid #e5e7eb; padding: 6px 0;">Total</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="item : ${items}">
                <td style="padding: 6px 0; border-bottom: 1px solid #f3f4f6;" th:text="${item.title}">Course/Class Access</td>
                <td style="padding: 6px 0; border-bottom: 1px solid #f3f4f6;" align="center" th:text="${item.quantity}">1</td>
                <td style="padding: 6px 0; border-bottom: 1px solid #f3f4f6;" align="right">
                    <span th:text="${#numbers.formatDecimal(item.total, 1, 'COMMA', 2, 'POINT')}"></span>
                    <span th:text="${currencyCode}">KES</span>
                </td>
            </tr>
            </tbody>
        </table>
    </section>

    <section style="margin-bottom: 16px;">
        <h2 style="margin: 0 0 8px 0; font-size: 18px;">Totals</h2>
        <p style="margin: 0;">Subtotal: <span th:text="${#numbers.formatDecimal(subtotal, 1, 'COMMA', 2, 'POINT')}">0.00</span> <span th:text="${currencyCode}">KES</span></p>
        <p style="margin: 4px 0 0 0;" th:if="${platformFeeAmount != null}">Platform fee: <span th:text="${#numbers.formatDecimal(platformFeeAmount, 1, 'COMMA', 2, 'POINT')}">0.00</span> <span th:text="${platformFeeCurrency != null ? platformFeeCurrency : currencyCode}">KES</span></p>
        <p style="margin: 8px 0 0 0; font-weight: 700;">Total paid: <span th:text="${#numbers.formatDecimal(total, 1, 'COMMA', 2, 'POINT')}">0.00</span> <span th:text="${currencyCode}">KES</span></p>
    </section>

    <section style="border-top: 1px solid #d1d5db; padding-top: 8px; font-size: 13px; color: #4b5563;">
        <p style="margin: 0;">Please retain this receipt for your records. For references, cite as: “Elimika Order <span th:text="${orderDisplayId != null ? orderDisplayId : orderId}">#12345</span>, payment confirmed <span th:text="${#temporals.format(createdAt, 'yyyy-MM-dd')}">2025-11-18</span>.”</p>
    </section>
</article>
</body>
</html>
